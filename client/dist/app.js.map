{"version":3,"sources":["app.js","background.js","clock.js","config.js","game.js","homeMenu.js","map.js","maze.js","over.js","player.js","timeTrial.js","twoPlayer.js","viewPort.js"],"names":["App","config","canvas","document","getElementById","canvasID","context","getContext","timeTrial","twoPlayer","menu","setMenu","self","HomeMenu","time","two","roomID","inFrame","TimeTrial","start","game","TwoPlayer","animate","window","requestAnimFrame","run","Background","maze","bColor","size","Map","scale","buildBMaze","color","buildMaze","sRate","zoom","offset","centerOffset","setScreen","draw","dimen","innerWidth","innerHeight","clearRect","height","width","Clock","clockID","addID","startTime","interval","clock","add","left","addTop","stamp","fSize","isAdd","style","display","amount","innerHTML","toString","opacity","dist","mid","opVal","Math","abs","top","fontSize","Date","io","connect","onload","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","callback","setTimeout","Game","map","player","Player","viewPort","ViewPort","colorHistory","difficulty","colorSet","gameOver","socket","initASettings","OverMenu","gameReset","on","emit","colors","pickTColors","reSet","listen","introLoop","save","vCenter","visualForm","restore","visualComplete","setPCoordAtStart","segueLoop","oldScale","percent","coord","drawScreen","listenForMovement","gameLoop","pCollision","checkCollision","status","finish","win","ctx","handleHistory","finishLoop","randomIDX","floor","random","length","i","push","startCallbacks","title","titleID","menuID","timeID","twoID","connectID","back","backID","timeStart","twoStart","background","animInfo","init","s","menuOffset","offsetHeight","menuHeight","onclick","closeUI","disabled","connecting","conFrame","uiDone","revealUI","conElipse","scaleMaze","cHTML","tHeight","titleHeight","mHeight","rDegree","growTitle","dropMenu","newHeight","newDegree","newTop","transform","rate","tileSize","tSize","tiles","sTiles","ends","vForm","wIdx","stop","idx","y","x","fillStyle","tX","tY","fillRect","drawWin","grow","col","row","end","c","r","dimensions","pX","pY","lLeft","lRight","rLeft","rRight","bTop","bBottom","tTop","tBottom","skipEnds","fullSize","addEnds","assembleTMap","mTile","adjust","visited","carve","cCoord","noEnds","pos","rLen","inColStart","inRowStart","dir","sCoord","eCoord","setStartTiles","radius","beginPath","arc","PI","fill","Maze","directions","pickEnds","shuffle","newX","newY","inXBounds","inYBounds","sides","mSize","side","endTile","a","index","temp","rCallback","overlay","overTitle","overMenu","restartButton","restart","homeButton","home","oVal","url","location","href","o","initCoord","speed","maxDistance","pointer","history","updateCoord","keepHistory","addEventListener","e","pageX","pageY","bounds","novel","h","sqrt","pow","maxDist","pCoord","xDist","yDist","angle","asin","xVelocity","cos","yVelocity","sin","addTime","showTime","animAdd","tickTime","outOfTime","showScreen","enemy","enemyFinish","initID","split","communicateMovement","id","data","w","console","log","sendData","zChange","zMax","cMax","center","getCenter","distance","xOffset","yOffset","mX","mY","zCoord","vCoord","p","d"],"mappings":"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","file":"app.js","sourcesContent":["\"use strict\";\n\nclass App {\n\n\tconstructor(config){\n\t\tthis.config = config;\n\t\tthis.canvas = document.getElementById(config.canvasID);\n\t\tthis.context = this.canvas.getContext('2d');\n\t\tthis.timeTrial = false;\n\t\tthis.twoPlayer = false;\n\t    this.menu;\n\t    this.setMenu();\n\t}\n\n\tsetMenu(){\n\t\tconst self = this;\n\n\t\tthis.menu = new HomeMenu(this.config, {\n\t\t\ttime: function(){\n\t\t\t\tself.timeTrial = true \n\t\t\t},\n\t\t\ttwo: function(roomID){ \n\t\t\t\tself.twoPlayer = roomID;\n\t\t\t}\n\t\t});\n\t}\n\n\trun(inFrame){\n\t\tif (this.timeTrial){\n\t\t\tnew TimeTrial(this.config).start();\n\t\t}else if (this.twoPlayer){\n\t\t\tconst roomID = this.twoPlayer,\n\t\t\t      game = new TwoPlayer(this.config, this.twoPlayer);\n\n\t\t\tgame.start();\n\t\t}else{\n\t\t\tconst self = this;\n\t\t\tif (inFrame){ this.menu.animate() };\n\n\t\t\twindow.requestAnimFrame(function(){\n\t\t\t\tself.run(true);\n\t\t\t});\n\t\t}\n\t}\n};\n","\"use strict\";\n\nclass Background { \n\n\tconstructor(canvasID, maze, bColor, size){\n\t\tthis.canvas = document.getElementById(config.canvasID);\n\t\tthis.context = this.canvas.getContext('2d');\n\t\tthis.maze = new Map(10);\n\n\t\tthis.animate = {\n\t\t\t'sRate': 50,\n\t\t\t'zoom': .998\n\t\t};\n\n\t\tthis.scale;\n\t\tthis.buildBMaze(maze, bColor);\n\t}\n\n\n\tbuildBMaze(maze, bColor){\n\t\tconst color = bColor ? bColor : '#4c6b8a',\n\t\t\t  size = maze.size;\n\n\t    this.maze.buildMaze(size, [color, color], maze, true);\n\t}\n\n\tscaleMaze(){\n\t\tconst sRate = this.animate.sRate,\n\t          zoom = this.animate.zoom,\n\t          offset = this.centerOffset();\n\n\t    this.setScreen();\n\t\tthis.maze.draw(this.context, offset, this.scale);\n\n\t\tif (sRate > 950){\n\t\t\tthis.animate.zoom = .998;\n\t\t}else if (zoom < 1 && sRate < 50){\n\t\t\tthis.animate.zoom = 1.002\n\t\t}\n\n\t\tthis.animate.sRate *= this.animate.zoom;\n\t}\n\n\tcenterOffset(){\n\t\treturn [\n\t\t\tthis.maze.dimen()[0]/2 - (window.innerWidth/2)/this.scale,\n\t\t\tthis.maze.dimen()[1]/2 - (window.innerHeight/2)/this.scale\n\n\t\t];\n\t}\n\n\n\tsetScreen(){\n\t\tconst sRate = this.animate.sRate;\n\t    this.context.clearRect(0, 0, self.canvas.height, self.canvas.width);\n\t    this.canvas.height = window.innerHeight;\n\t    this.canvas.width = window.innerWidth;\n\t    this.scale = window.innerHeight/sRate;\n\t    this.context.scale(this.scale, this.scale)\n\t}\n}","\"use strict\";\n\nclass Clock{\n\tconstructor(clockID, addID, startTime, interval){\n\t\tthis.clock = document.getElementById(clockID);\n\t\tthis.add = document.getElementById(addID);\n\t\tthis.time = startTime ? startTime : 15;\n\t\tthis.left = this.time;\n\t\tthis.interval = interval ? interval * 1000: 1000;\n\t\tthis.addTop = 18;\n\t\tthis.stamp;\n\t\tthis.fSize = 4;\n\t\tthis.isAdd = false;\n\t}\n\n\n\toutOfTime(){\n\t\tif (this.left < 0){\n\t\t\tthis.clock.style.display = 'none';\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false\n\t}\n\n\taddTime(amount){\n\t\tconst self = this;\n\n\t\tthis.left += amount\n\t\tthis.add.innerHTML = \"+\" + amount.toString();\n\t\tthis.addTop = 18;\n\t\tthis.isAdd = true;\n\t\tthis.add.style.opacity = '0'\n\t\tthis.add.style.display = 'initial';\n\t}\n\n\tanimAdd(){\n\t\tconst self = this,\n\t\t\t  dist = (18 - 8)/2, mid = (18 + 8)/2,\n\t\t      opVal = 1 - Math.abs(mid - this.addTop)/dist;\n\n\t\tthis.add.style.top = this.addTop.toString() + '%'\n\t\tthis.add.style.opacity = opVal;\n\t\tthis.addTop -= .15;\n\n\t\tif (this.addTop < 8){\n\t\t\tthis.isAdd = false;\n\t\t\tthis.add.style.display = 'none';\n\t\t}\n\t}\n\n\treSet(time){\n\t\tif (time){ this.time = time }\n\t\tthis.left = this.time;\n\t}\n\n\tshowTime(){\n\t\tthis.clock.style.display = 'initial';\n        this.clock.innerHTML = this.left.toString();\n        this.clock.style.color = 'white'\n        this.clock.style.fontSize = '3em';\n\t}\n\n\ttickTime(){\n        if (!this.stamp){\n            this.stamp = new Date();\n        }else if (new Date() - this.stamp >= this.interval){\n            this.stamp = new Date();\n            this.left -= this.interval/1000;\n            this.clock.innerHTML = this.left.toString();\n            if (this.left < 11) { this.fSize = 4 };\n        }\n\n        if (this.left < 11){\n        \tthis.clock.style.fontSize\n        \tthis.clock.style.fontSize = this.fSize.toString() + 'em';\n        \tthis.fSize -= .03;\n        }\n\t}\n}\n\n\t// addTime(){\n\t// \tthis.addTop *= .98;\n\t// \tthis.add.style.top = this.addTop.string();\n\t// }","'use strict';\n\nconst config = {\n        'canvasID': 'canvas',\n        'titleID': 'title',\n        'menuID': 'menu',\n        'timeID': 'time',\n        'twoID': 'two',\n        'clockID': 'clock',\n        'overTitle': 'overTitle',\n        'overMenu': 'overMenu',\n        'overlay': 'overlay',\n        'home': 'home',\n        'restart': 'restart',\n        'addID': 'add',\n        'connectID': 'connecting',\n        'backID': 'back',\n        'socket': io.connect()\n      };\n\nwindow.onload = function(){\n  new App(config).run();\n}\n\nwindow.requestAnimFrame = (function(){\n  return  window.requestAnimationFrame       ||\n          window.webkitRequestAnimationFrame ||\n          window.mozRequestAnimationFrame    ||\n          function( callback ){\n            window.setTimeout(callback, 1000 / 60);\n          };\n})();","\"use strict\";\n\nclass Game {\n\n    constructor(config){\n        this.canvas = document.getElementById(config.canvasID);\n        this.context = this.canvas.getContext('2d');\n        this.map = new Map(130);\n        this.player = new Player([0, 0], {\n            'player': 'white',\n            'history': '#4c6b8a'\n        });\n        this.viewPort = new ViewPort(50);\n        this.sRate = 800;\n        this.stamp = true;\n        this.colorHistory = [];\n        this.difficulty = 5;\n        this.colorSet = [];\n        this.gameOver;\n        this.scale;\n        this.socket = config.socket;\n        this.initASettings(config)\n    }\n\n    initASettings(config){\n        const self = this;\n        this.colorSet = [\n            ['#69111e', '#7D1424'],\n            ['#27ae60', '#2ecc71'],\n            ['#e67e22', '#d35400'],\n            ['#95a5a6', '#7f8c8d'],\n            ['#9b59b6', '#8e44ad']\n        ]\n\n        this.gameOver = new OverMenu(config, function(){\n            self.gameReset();\n        });\n\n        this.socket.on('incomingMaze', function(maze){\n            self.run(maze);\n        });\n    }\n\n    start(){\n        this.socket.emit('requestMaze', this.difficulty);\n    }\n\n    run(maze){\n        const self = this,\n              colors = this.pickTColors();\n\n        this.map.buildMaze(this.difficulty, colors, maze);\n        this.player.reSet();\n        this.sRate = 4000;\n        window.requestAnimFrame(function(){\n            self.player.listen = false;\n            self.introLoop()\n        });\n\n    }\n\n    introLoop(){\n        const self = this;\n\n        this.setScreen();\n        this.context.save();\n        this.context.scale(this.scale, this.scale);\n\n        const vCenter = [\n            this.map.dimen()[0]/2,\n            this.map.dimen()[1]/2\n        ], offset = this.viewPort.offset(vCenter, this.scale);\n\n        this.map.visualForm(this.context, offset, this.stamp, this.scale);\n        this.stamp = !this.stamp;\n        this.context.restore();\n\n        if (this.map.visualComplete()){\n            this.player.listen = false;\n            this.setPCoordAtStart();\n            window.requestAnimFrame(function(){\n                self.segueLoop();\n            });\n        }else{\n             window.requestAnimFrame(function(){\n                self.introLoop();\n             });\n        }\n    }\n\n    segueLoop(){\n        const self = this,\n              oldScale = this.scale;\n\n        this.sRate *= .99;\n        this.setScreen();\n        const percent = (4000 - this.sRate)/(4000 - 800)\n        const offset = this.viewPort.zoom(\n            this.player.coord,\n            this.scale,\n            percent\n        );\n\n\n        this.context.scale(this.scale, this.scale);\n        this.drawScreen(offset);\n\n        window.requestAnimFrame(function(){\n            if (self.sRate > 800){\n                self.segueLoop();\n            }else{\n                self.player.listen = true;\n                self.player.listenForMovement();\n                self.gameLoop();\n\n            }\n        });\n    }\n\n    gameLoop(){\n        this.setScreen();\n        const self = this,\n              offset = this.viewPort.offset(\n                this.player.coord, \n                this.scale\n              ),\n              pCollision = this.map.checkCollision(\n                this.player.coord,\n                this.player.dimen\n              );\n\n        if (pCollision.status && pCollision.finish){\n            this.win();\n            return;\n        }else if (pCollision.status){\n            this.setPCoordAtStart();\n        }\n\n        this.context.scale(this.scale, this.scale);\n        this.drawScreen(offset)\n\n        window.requestAnimFrame(function(){\n            self.gameLoop()\n        });\n    }\n\n\n    drawScreen(offset){\n        const ctx = this.context,\n              scale = this.scale;\n\n        this.map.draw(ctx, offset, scale);\n        this.player.handleHistory(ctx, offset, scale);\n        this.player.draw(ctx, offset, scale);\n    }\n\n    win(){\n        this.player.reSet(true);\n        this.finishLoop();\n    }\n\n    finishLoop(){\n        const self = this;\n        this.sRate *= 1.01;\n\n        this.setScreen();\n        const vCenter = [\n            this.map.dimen()[0]/2,\n            this.map.dimen()[1]/2\n        ];\n\n        const percent = (this.sRate - 800)/(4000 - 800),\n              offset = this.viewPort.zoom(\n                vCenter,\n                this.scale,\n                percent\n              );\n\n        this.context.scale(this.scale, this.scale);\n        this.drawScreen(offset);\n\n        window.requestAnimFrame(function(){\n            if (self.sRate < 4000){\n                self.finishLoop();\n            }else{\n                self.difficulty += 2;\n                self.start();\n            }\n        });\n    }\n\n    gameReset(){\n        this.difficulty = 5;\n        this.start();\n    }\n\n    setScreen(){\n        this.context.clearRect(0, 0, self.canvas.height, self.canvas.width);\n        this.canvas.height = window.innerHeight;\n        this.canvas.width = window.innerWidth;\n        this.scale = window.innerHeight/this.sRate;\n\n    }\n\n    setPCoordAtStart(){\n        this.player.coord = [this.map.start[0], this.map.start[1]];\n    }\n\n    pickTColors(){\n        const randomIDX = Math.floor(Math.random() * this.colorSet.length);\n\n        if (this.colorHistory.length == this.colorSet.length){    \n            this.colorHistory = [\n                this.colorHistory[this.colorHistory.length - 1]\n            ];\n        }\n\n        for (var i = 0; i < this.colorHistory.length; i++){\n            if (this.colorHistory[i] == randomIDX){\n                return this.pickTColors();\n            }\n        }\n\n        this.colorHistory.push(randomIDX);\n        return this.colorSet[randomIDX];\n    }\n}","\"use strict\";\n\nclass HomeMenu {\n\n\tconstructor(config, startCallbacks){\n\t\tthis.title = document.getElementById(config.titleID);\n\t\tthis.menu =  document.getElementById(config.menuID);\n\t\tthis.timeTrial =  document.getElementById(config.timeID);\n\t\tthis.twoPlayer = document.getElementById(config.twoID);\n\t\tthis.connect = document.getElementById(config.connectID);\n\t\tthis.back = document.getElementById(config.backID);\n\t\tthis.timeStart = startCallbacks.time;\n\t\tthis.twoStart = startCallbacks.two;\n\t\tthis.socket = config.socket;\n\t\tthis.background;\n\t\tthis.animInfo = {};\n\t\tthis.init(config.canvasID);\n\t}\n\t\n\tinit(canvasID){\n\t\tconst self = this;\n\n\t\tthis.animInfo = {\n\t\t\t'titleHeight': 0,\n\t\t\t'menuHeight': 0,\n\t\t\t'rate': 3,\n\t\t\t'uiDone': false,\n\t\t\t'connecting': false,\n\t\t\t'conFrame': 0,\n\t\t}\n\n\t\tthis.socket.on('backgroundMaze', function(maze){\n\t\t\tself.background = new Background(canvasID, maze);\n\t\t\tself.setMenu();\n\t\t});\n\t}\n\n\tsetMenu(){\n\t\tthis.menu.style.display = 'initial';\n\t\tthis.title.style.display = 'initial';\n\t\tthis.connect.style.display = 'none';\n\t\tthis.back.style.display = 'none';\n\t\tthis.title.style.height = 0;\n\n\t\tconst s = this,\n\t\t\t  menuOffset = this.menu.offsetHeight,\n\t\t\t  menuHeight = (menuOffset/window.innerHeight) * 100;\n\n\t\tthis.timeTrial.onclick = function(){\n\t\t\ts.closeUI();\n\t\t\ts.timeStart();\n\t\t}\n\n\t\tthis.back.onclick = function(){\n\t\t\ts.connect.style.display = 'none'\n\t\t\ts.twoPlayer.disabled = false;\n\t\t\ts.timeTrial.disabled = false;\n\t\t\ts.twoPlayer.style.display = 'initial';\n\t\t\ts.timeTrial.style.display = 'initial';\n\t\t\ts.animInfo.connecting = false;\n\t\t\ts.animInfo.conFrame = 0;\n\t\t\ts.connect.innerHTML = 'connecting';\n\t\t\ts.socket.emit('leaveQueue');\n\t\t\ts.back.style.display = 'none'\n\t\t}\n\n\t\tthis.twoPlayer.onclick = function(){\n\t\t\ts.socket.emit('connectTwoP');\n\t\t\ts.twoPlayer.disabled = true;\n\t\t\ts.timeTrial.disabled = true;\n\t\t\ts.twoPlayer.style.display = 'none';\n\t\t\ts.timeTrial.style.display = 'none';\n\t\t\ts.connect.style.display = 'initial'\n\t\t\ts.back.style.display = 'initial'\n\t\t\ts.animInfo.connecting = true;\n\t\t}\n\n\t\tthis.socket.on('connectedTwoP', function(roomID){\n\t\t\ts.closeUI();\n\t\t\ts.twoStart(roomID);\n\t\t});\n\n\t\tthis.menu.style.top = \"-\" + menuHeight.toString() + \"%\"\n\t\tthis.animInfo.menuHeight = menuHeight * -1;\t\t\n\t}\n\n\tcloseUI(){\n\t\tthis.menu.style.display = 'none';\n\t\tthis.title.style.display = 'none';\n\t}\n\n\tanimate(){\n\t\tif (!this.background){ return };\n\t\tif (!this.animInfo.uiDone){\n\t\t\tthis.revealUI();\n\t\t}\n\n\t\tif (this.connect){\n\t\t\tthis.conElipse();\n\t\t}\n\t\tthis.background.scaleMaze();\n\t}\n\n\tconElipse(){\n\t\tconst cHTML = this.connect.innerHTML;\n\t\tif (this.animInfo.conFrame % 20 == 0){\n\t\t\tif (cHTML.length == \"connecting\".length + 3){\n\t\t\t\tthis.connect.innerHTML = \"connecting\";\n\t\t\t}else{\n\t\t\t\tthis.connect.innerHTML += \".\";\n\t\t\t}\n\t\t}\n\n\t\tthis.animInfo.conFrame++;\n\t}\n\n\trevealUI(){\n\t\tconst tHeight = this.animInfo.titleHeight,\n\t\t      mHeight = this.animInfo.menuHeight,\n\t\t\t  rDegree = (tHeight * .1) * 360,\n\t\t\t  menuOffset = this.menu.offsetHeight,\n\t\t      menuHeight = (menuOffset/window.innerHeight) * 100;\n\n\t\tif (rDegree < 361){\n\t\t\tthis.growTitle(rDegree);\n\t\t}else if (mHeight < 50 - menuHeight/2){\n\t\t\tthis.dropMenu(menuHeight);\n\t\t}else{\n\t\t\tthis.animInfo.uiDone = true;\n\t\t}\n\t}\n\n\tgrowTitle(rDegree){\n\t\tconst self = this,\n\t\t      tHeight = this.animInfo.titleHeight,\n\t\t\t  newHeight = tHeight.toString() + '%',\n\t\t\t  newDegree = 'rotate(' + rDegree.toString() + 'deg)',\n\t\t\t  top = 50 - (40 * tHeight * .1),\n\t\t\t  newTop = top.toString() + '%';\n\n\t\tthis.title.style.height = newHeight;\n\t    this.title.style.transform = newDegree;\n\t    this.title.style.top = newTop;\n\n    \tthis.animInfo.titleHeight += 0.4;\n\t}\n\n\tdropMenu(menuHeight){\n\t\tconst self = this,\n\t\t      mHeight = this.animInfo.menuHeight;\n\n\t\tthis.menu.style.top = mHeight.toString() + '%';\n\t\tthis.animInfo.menuHeight += this.animInfo.rate;\n\t\tthis.animInfo.rate *= .98;\n\t}\n}","\"use strict\";\n\nclass Map {\n\n    constructor(tileSize){\n        this.tSize = tileSize;\n        this.tiles = [];\n        this.start;\n        this.sTiles = {};\n        this.ends = [];\n        this.vForm = [0, 0];\n        this.colors = [\"black\", \"white\"];\n        this.wIdx = 0\n    }\n\n    draw(ctx, offset, scale, stop){\n        const finish = this.ends.length > 0 ? this.ends[1] : null;\n        let idx = 0;\n\n        for (let y = 0; y < this.tiles.length; y++){\n            if (y  * this.tSize - offset[1] > window.innerHeight/scale && this.colors[0] == this.colors[1]){ break };\n\n            for (let x = 0; x < this.tiles[y].length; x++){\n                if (x * this.tSize - offset[0] > window.innerWidth/scale && this.colors[0] == this.colors[1]){ break };\n\n                if (this.tiles[y][x]){\n                    ctx.fillStyle = this.colors[idx];\n                    const tX = (x * this.tSize) - offset[0],\n                          tY = (y * this.tSize) - offset[1];\n\n                    ctx.fillRect(tX, tY, this.tSize, this.tSize);\n                }else if (finish && x == finish[0] && y == finish[1]){\n                    this.drawWin(ctx, offset);\n                }\n\n                idx = idx < 1 ? 1 : 0;\n\n                if (stop && y == stop[1] && x == stop[0]){\n                    break;\n                }\n            }\n\n            if (stop && y == stop[1]){\n                break;\n            }\n\n            idx = idx < 1 ? 1 : 0;\n        }\n    }\n\n    dimen(){\n        return [\n            this.tiles[0].length * this.tSize,\n            this.tiles.length * this.tSize\n        ]\n    }\n\n    visualForm(ctx, offset, grow, scale){\n        let col = this.vForm[1],\n            row = this.vForm[0];\n\n        while (col < this.tiles.length && !this.tiles[col][row]){\n            if (row < this.tiles[col].length){\n                row++;\n            }else{\n                row = 0;\n                col++;\n            }\n        }\n\n        this.draw(ctx, offset, scale, [row, col]);\n\n        if (grow && col < this.tiles.length){\n            if (row + 1 < this.tiles[col].length){\n                this.vForm = [row + 1, col];\n            }else{\n                this.vForm = [0, col + 1];\n            }\n        }\n    }\n\n    visualComplete(){\n        let end = [];\n\n        for (let c = 0; c < this.tiles.length; c++){\n            for (let r = 0; r < this.tiles[c].length; r++){\n                if (this.tiles[c][r]){\n                    end[0] = r;\n                    if (!end[1] || end[1] < c){ end[1] = c }\n                };\n            }     \n        }\n\n        return (\n            this.vForm[1] >= end[1] &&\n            this.vForm[0] >= end[0]\n        );\n    }\n\n\n    checkCollision(coord, dimensions){\n        const width = dimensions.width,\n              height = dimensions.height,\n              pX = coord[0] - (width/2),\n              pY = coord[1] - (height/2),\n              finish = this.ends[1];\n\n        for (let y = 0; y < this.tiles.length; y++){\n            for (let x = 0; x < this.tiles[y].length; x++){\n                if (this.tiles[y][x] || (x == finish[0] && y == finish[1])){\n                    const tX = x * this.tSize,\n                          tY = y * this.tSize,\n                          lLeft = pX > tX,\n                          lRight = pX < tX + this.tSize,\n                          rLeft = pX + (width) > tX,\n                          rRight = pX + (width) < tX + this.tSize;\n\n                    if (lLeft && lRight || rLeft && rRight || !lLeft && !rRight){\n                        const bTop = pY + (height) > tY,\n                              bBottom = pY + (height) < tY + this.tSize,\n                              tTop = pY > tY,\n                              tBottom = pY  < tY + this.tSize;\n\n                        if (bTop && bBottom || tTop && tBottom || !tTop && !bBottom){      \n                            return {\n                                'status': true, \n                                'finish': x == finish[0] && y == finish[1]\n                            }\n                        }\n                    }\n                }\n            }\n        }\n\n        return {'status': false, 'finish': false};\n    }\n\n\n    buildMaze(size, colors, maze, skipEnds){\n        const fullSize = (size * 2) + 1;\n\n        if (colors){ this.colors = colors };\n        this.vForm = [0, 0];\n\n        if(!skipEnds){\n            this.addEnds(maze, fullSize);\n        }else{\n            this.sTiles = {'tiles':[], 'adjust': [0,0], 'pos': null}\n        }\n\n        this.assembleTMap(fullSize);\n\n        for (let c = 0; c < size; c++){\n            for (let r = 0; r < size; r++){\n\n                const mTile = maze.map[c][r],\n                      coord = [\n                        (r * 2) + 1 + this.sTiles.adjust[0],\n                        (c * 2) + 1 + this.sTiles.adjust[1]\n                      ];\n                      \n                if (mTile && mTile.visited){\n\n                    this.tiles[coord[1]][coord[0]] = false;\n\n                    for (let i = 0; i < mTile.carve.length; i++){\n\n                        const cCoord = [\n                            coord[0] + mTile.carve[i][0], \n                            coord[1] + mTile.carve[i][1]\n                        ];\n\n                        this.tiles[cCoord[1]][cCoord[0]] = false;\n                    }\n                }\n            }\n        }\n    }\n\n    assembleTMap(size, noEnds){\n        const sTiles = this.sTiles.tiles,\n              pos = this.sTiles.pos;\n\n        this.tiles = [];\n        \n        for (let c = 0; c < size + sTiles.length; c++){\n            this.tiles[c] = [];\n            const rLen = sTiles.length > 0 ? sTiles[0].length : 0;\n            for (let r = 0; r < size + rLen; r++){\n                if(!pos){\n                    this.tiles[c][r] = true;\n                }else{\n                    const inColStart = c >= pos[1] && c < pos[1] + sTiles.length,\n                      inRowStart = r >= pos[0] && r < pos[0] + sTiles[0].length;\n\n                    if (inColStart && inRowStart){\n                        this.tiles[c].push(sTiles[c - pos[1]][r - pos[0]]);\n                    }else if (pos[0] === 0 || pos[0] == size){\n                        this.tiles[c].push((inColStart || !inRowStart) && c < size);\n                    }else if (pos[1] === 0 || pos[1] == size){\n                        this.tiles[c].push((!inColStart || inRowStart) && r < size);\n                    }\n\n                }\n            }\n        }\n\n        for (let i = 0; i < this.ends.length; i++){\n            const c = this.ends[i][1] + this.sTiles.adjust[1],\n                  r = this.ends[i][0] + this.sTiles.adjust[0]\n\n            this.tiles[c][r] = false;\n            if (i > 0){this.ends[i] = [r, c]}\n        }\n    }\n\n    addEnds(maze, fSize){\n        this.ends = [];\n        const ends = ['start', 'end'];\n        var dir, sCoord;\n\n        for (let x = 0; x < ends.length; x++){\n            if (maze[ends[x]]){\n                const end = maze[ends[x]],\n                    eCoord = [end[0] * 2 + 1, end[1] * 2 + 1];\n                if (end[0] === 0){\n                    if (ends[x] == 'start'){\n                        dir = 'left'\n                        this[ends[x]] = [\n                            eCoord[0] * this.tSize + this.tSize, \n                            eCoord[1] * this.tSize\n                        ];\n                    }\n\n                    this.ends.push([eCoord[0] - 1, eCoord[1]]);\n                }else if (end[0] == maze.size - 1){\n                    if (ends[x] == 'start'){\n                        dir = 'right';\n                        this[ends[x]] = [\n                            eCoord[0] * this.tSize + (this.tSize * 3),\n                            eCoord[1] * this.tSize\n                        ];\n                    }\n\n                    this.ends.push([eCoord[0] + 1, eCoord[1]]);\n                }else if (end[1] === 0){\n                    if (ends[x] == 'start'){\n                        dir = 'top';\n                        this[ends[x]] = [\n                            eCoord[0] * this.tSize,\n                            eCoord[1] * this.tSize + this.tSize\n                        ];\n                    }\n\n                    this.ends.push([eCoord[0], eCoord[1] - 1]);\n                }else if (end[1] == maze.size - 1){\n                    if (ends[x] == 'start'){\n                        dir = 'bottom';\n                        this[ends[x]] = [\n                            eCoord[0] * this.tSize,\n                            eCoord[1] * this.tSize + (this.tSize * 3)\n                        ];\n                    }\n\n\n                    this.ends.push([eCoord[0], eCoord[1] + 1]);\n                }\n\n                if (ends[x] == 'start'){ sCoord = [eCoord[0], eCoord[1]]}\n            }\n        }\n\n        this.setStartTiles(dir, sCoord, fSize);\n    }\n\n    drawWin(ctx, offset){\n        const color = ['#add9e6', '#0490d6'][this.wIdx],\n              x = this.ends[1][0] * this.tSize + this.tSize/2 - offset[0],\n              y = this.ends[1][1] * this.tSize + this.tSize/2 - offset[1],\n              radius = this.tSize * .7;\n\n        ctx.beginPath();\n        ctx.arc(x, y, 50, 0, 2*Math.PI);\n        ctx.fillStyle = color;\n        ctx.fill();\n\n        this.wIdx = this.wIdx > 0 ? 0 : 1\n    }\n\n    setStartTiles(dir, coord, size){\n        this.sTiles.tiles = [];\n        this.sTiles.pos = [];\n        this.sTiles.adjust = [0, 0];\n\n        for (let c = 0; c < 5; c++){\n            const row = [];\n            for (let r = 0; r < 5; r++){\n                row.push(c < 1 || c > 3 || r < 1 || r > 3);\n            }\n            this.sTiles.tiles.push(row);\n        }\n\n        switch (dir){\n            case 'top':\n                this.sTiles.pos = [coord[0] - 2, 0]\n                this.sTiles.adjust = [0, this.sTiles.tiles.length];\n\n                for (let r = 1; r < 4; r++){\n                    this.sTiles.tiles[4][r] = false;\n                };\n\n                break;\n\n            case 'bottom':\n                this.sTiles.pos = [coord[0] - 2, size]\n\n                for (let r = 1; r < 4; r++){\n                    this.sTiles.tiles[0][r] = false;\n                };\n\n                break;\n\n            case 'right':\n                this.sTiles.pos = [size, coord[1] - 2];\n\n                for (let c = 1; c < 4; c++){\n                    this.sTiles.tiles[c][0] = false;\n                };\n\n                break;\n\n            case 'left':\n                this.sTiles.pos = [0, coord[1] - 2];\n                this.sTiles.adjust = [this.sTiles.tiles[0].length, 0];\n\n                for (let c = 1; c < 4; c++){\n                    this.sTiles.tiles[c][4] = false;\n                };\n\n                break;\n        }\n    }\n\n    pickTColors(){\n        const randomIDX = Math.floor(Math.random() * this.colorSet.length);\n\n        if (this.colorHistory.length == this.colorSet.length){    \n            this.colorHistory = [\n                this.colorHistory[this.colorHistory.length - 1]\n            ];\n        }\n\n        for (var i = 0; i < this.colorHistory.length; i++){\n            if (this.colorHistory[i] == randomIDX){\n                return this.pickTColors();\n            }\n        }\n\n        this.colorHistory.push(randomIDX);\n        return this.colorSet(this.colorHistory[randomIDX]);\n    }\n}","\"use strict\";\n\nclass Maze{\n\n    constructor(size){\n        this.map = [];\n        this.size = size > 5 ? size : 5;\n        this.start;\n        this.end;\n        this.directions = [\n            [0, 1],\n            [0, -1],\n            [1, 0],\n            [-1, 0]\n        ]\n    }\n\n    assemble(){\n        for (let c = 0; c < this.size; c++){\n            var row = [];\n\n            for (var r = 0; r < this.size; r++){\n                row.push({\n                    'carve': [], \n                    'visited': false\n                })\n            }\n\n            this.map.push(row);\n        }\n\n        this.carve(0, 0);\n        this.pickEnds();\n    }\n\n    carve(x, y){\n        this.map[y][x].visited = true;\n        shuffle(this.directions);\n\n        for (let i = 0; i < this.directions.length; i++){\n            const dir = this.directions[i],\n                newX = x + dir[0],\n                newY = y + dir[1],\n                inXBounds = newX < this.size && newX >= 0,\n                inYBounds = newY < this.size && newY >= 0;\n\n            if (inXBounds && inYBounds && !this.map[newY][newX].visited){\n                this.map[y][x].carve.push(dir);\n                this.carve(newX, newY);\n            }\n        }\n    }\n\n    pickEnds(){\n        if (!this.start || !this.end){\n\n            const sides = [\n                [0, null], \n                [this.size - 1, null], \n                [null, 0], \n                [null, this.size - 1]\n            ], mSize = this.size;\n\n            let side = sides[Math.floor(Math.random() * sides.length)];\n\n            for (let i = 0; i < side.length; i++){\n                if (side[i] !== 0 && !side[i]){\n                    side[i] = Math.floor(Math.random() * (mSize - 2)) + 2;\n                }\n            }\n\n            const endTile = this.map[side[1]][side[0]];\n\n            if (endTile && endTile.visited && !this.start){\n                this.start = side;\n            }else if (endTile && endTile.visited){\n                this.end = side;\n            }\n\n            this.pickEnds();\n        }\n    }\n};\n\nfunction shuffle(a){\n    for (var i = a.length - 1; i >= 0; i--){\n        var index = Math.floor(Math.random() * (i + 1)),\n            temp = a[index];\n\n        a[index] = a[i];\n        a[i] = temp;\n    }\n}","\"use strict\";\n\nclass OverMenu {\n\n\tconstructor(config, rCallback){\n\t\tthis.overlay = document.getElementById(config.overlay);\n\t\tthis.title = document.getElementById(config.overTitle);\n\t\tthis.menu = document.getElementById(config.overMenu);\n\t\tthis.restartButton = document.getElementById(config.restart);\n\t\tthis.homeButton = document.getElementById(config.home);\n\t\tthis.restart = rCallback;\n\t\tthis.oVal = .01;\n\t\tthis.setMenu();\n\n\t}\n\n\tsetMenu(url){\n\t\tconst s = this;\n\n\t\tthis.homeButton.onclick = function(){\n\t\t\twindow.location.href = '/';\n\t\t}\n\n\t\tthis.restartButton.onclick = function(){\n\t\t\ts.overlay.style.opacity = 0;\n\t\t\ts.menu.style.opacity = 0;\n\t\t\ts.title.style.display = 'none';\n\t\t\ts.oVal = .01;\n\n\t\t\ts.restart();\n\t\t}\n\n\t\tthis.overlay.style.opacity = 0;\n\t\tthis.menu.style.opacity = 0;\n\t\tthis.overlay.style.display = 'initial';\n\t\tthis.menu.style.display = 'none';\n\t\tthis.title.style.display = 'none';\n\t}\n\n\tshowScreen(){\n\t\tconst self = this;\n\n\t\tthis.title.style.display = 'initial';\n\t\tthis.menu.style.display = 'initial'\n\n\t\twindow.requestAnimFrame(function(){\n\t\t\tself.animate();\n\t\t});\n\t}\n\n\tanimate(){\n\t\tconst o = this.oVal;\n\t\tthis.menu.style.opacity = o * 2 < 1 ? 0 * 2 : 1;\n\t\tthis.overlay.style.opacity = o;\n\t\tthis.oVal += .03;\n\t\t\n\t\tif (o < .5){\n\t\t\tconst self = this;\n\t\t\twindow.requestAnimFrame(function(){\n\t\t\t\tself.animate();\n\t\t\t});\n\t\t}\n\t}\n\n}","\"use strict\";\n\nclass Player { \n\n    constructor(initCoord, colors){\n        this.coord = initCoord;\n        this.speed = 8;\n        this.maxDistance = 500;\n        this.pointer = [null, null];\n        this.dimen = {\n            'width': 60,\n            'height': 60\n        };\n        this.colors = colors;\n        this.history = [];\n        this.listen = false;\n    }\n\n    draw(ctx, offset, scale){\n        const x = (this.coord[0] - (this.dimen.width/2) - offset[0]), \n              y = (this.coord[1] - (this.dimen.width/2) - offset[1]);\n       \n        ctx.save();\n        ctx.fillStyle = this.colors.player;\n        ctx.fillRect(x, y, this.dimen.width, this.dimen.height);\n        ctx.restore();\n\n        this.updateCoord(scale, offset, ctx);\n    }\n\n    reSet(keepHistory){\n        if (!keepHistory){\n            this.history = [];\n        }\n\n        this.listen = !this.listen;\n        this.pointer = [null, null];\n    }\n\n    listenForMovement(){\n        if (!this.listen){\n            this.listen = true;\n            return;\n        }\n\n        const self = this;\n\n        document.addEventListener('mousemove', function(e){\n            if (self.listen){ self.pointer = [e.pageX, e.pageY] };\n        });\n\n        document.addEventListener('mouseout', function(e){\n            self.pointer = [null, null];\n        });\n    }\n\n    handleHistory(ctx, offset, scale){\n        const bounds = [\n            window.innerWidth * -0.5,\n            window.innerHeight * -0.5,\n            window.innerWidth * 1.5,\n            window.innerHeight * 1.5\n        ], c = this.coord;\n\n        let novel = true;\n\n        ctx.save();\n        ctx.fillStyle = this.colors.history;\n\n        for (let i = this.history.length - 1; i >= 0; i--){\n            const h = this.history[i],\n                      x = (h[0] - offset[0]),\n                      y = (h[1] - offset[1]),\n                      inXBounds = x * scale > bounds[0] && x * scale < bounds[2],\n                      inYBounds = y * scale > bounds[1] && y * scale < bounds[3];\n\n            if (inXBounds && inYBounds){\n                ctx.beginPath();\n                ctx.arc(x, y, 10, 0, 2 * Math.PI);\n                ctx.fill();\n            }\n\n            if (novel){ \n                const dist = Math.sqrt(\n                    Math.pow(c[0] - h[0], 2) + Math.pow(c[1] - h[1], 2)\n                );\n\n                novel = dist > 4;\n            }\n        }\n\n        ctx.restore();\n\n        if (novel){\n            this.history.push([this.coord[0], this.coord[1]]);\n        } \n    }\n\n    updateCoord(scale, offset, ctx){\n        if (!this.pointer[0] || !this.pointer[1]){\n            return;\n        };\n\n        const maxDist = this.maxDistance,\n              pointer = [\n                this.pointer[0]/scale + offset[0],\n                this.pointer[1]/scale + offset[1]\n              ], \n              pCoord = [\n                this.coord[0],\n                this.coord[1]\n              ],\n\n\n              xDist = pointer[0] - pCoord[0],\n              yDist = pointer[1] - pCoord[1],\n              dist = Math.sqrt(Math.pow(xDist, 2) + Math.pow(yDist, 2)),\n\n              speed = dist <  maxDist ? this.speed * (dist/maxDist) : this.speed,\n              angle = dist > 0 ? Math.asin(yDist/dist) : 0;\n\n        let xVelocity = speed * Math.cos(angle),\n            yVelocity = speed * Math.sin(angle);\n\n        if (pointer[0] < this.coord[0]){ xVelocity *= -1 };\n\n        this.coord[0] += xVelocity;\n        this.coord[1] += yVelocity;\n    }\n}","\"use strict\";\n\nclass TimeTrial extends Game {\n\n\tconstructor(config){\n\t\tsuper(config);\n\t\tthis.clock = new Clock(config.clockID, config.addID);\n\n\t}\n\n\trun(maze){\n\t\tif (!maze){ \n\t\t\treturn;\n\t\t}else if (this.difficulty > 5){\n            this.clock.addTime(7 * 2);\n        }\n\n\t\tthis.clock.showTime();\n\t\tsuper.run(maze);\n\t}\n\n\tintroLoop(){\n\t\tif (this.clock.isAdd){ \n\t\t\tthis.clock.animAdd() \n\t\t}\n\n\t\tsuper.introLoop();\n\t}\n\n\tgameLoop(){\n\t\tthis.clock.tickTime();\n\n\t\tif (this.clock.outOfTime()){\n            this.player.listen = false;\n            this.gameOver.showScreen();\n            return;\n        }\n\n        super.gameLoop();\n\t}\n\n\tgameReset(){\n\t\tthis.clock.reSet();\n\t\tsuper.gameReset();\n\t}\n}","\"use strict\";\n\nclass TwoPlayer extends Game {\n\n\tconstructor(config, roomID){\n\t\tsuper(config);\n\t\tthis.enemy = new Player([0, 0], {\n            'player': 'gray',\n            'history': 'gray'\n\t\t});\n\n\t\tthis.enemyFinish = false;\n\t\tthis.roomID = roomID;\n\t}\n\t\n\tstart(){\n\t\tconst initID = this.roomID.split('#')[0],\n\t\t      self = this;\n\n\t\tthis.communicateMovement();\n\n\t\tif (initID == this.socket.id){\n\t\t\tconst data = {\n\t\t\t\t'size': this.difficulty,\n\t\t\t\t'room': this.roomID\n\t\t\t};\n\n        \tthis.socket.emit('requestMazeForRoom', data);\n\t\t}\n\n\n\t\twindow.requestAnimFrame(function(){\n\t\t\tconst w = self.canvas.width,\n\t\t\t      h = self.canvas.height;\n\n\t\t\tconsole.log(self);\n\t\t\tself.context.clearRect(0,0, w, h);\n\t\t});\n\n    }\n\n    segueLoop(){\n    \tif (this.enemy.coord[0] != this.map.start[0] || this.enemy.coord[0] != this.map.start[1]){\n    \t\tthis.enemy.coord = [this.map.start[0], this.map.start[1]]\n    \t};\n\n    \tsuper.segueLoop();\n\n    }\n\n\tgameLoop(){\n\t\tif (this.enemy.finish){\n            this.player.listen = false;\n            this.gameOver.showScreen();\n            return;\n        }\n\n        const sendData = {\n        \t'room': this.roomID,\n        \t'coord': this.player.coord\n        }\n\n        this.socket.emit('updatePlayerCoord', sendData);\n        super.gameLoop();\n\t}\n\n\tdrawScreen(offset){\n\t\tconst ctx = this.context,\n              scale = this.scale;\n\n        this.map.draw(ctx, offset, scale);\n        this.enemy.handleHistory(ctx, offset, scale);\n        this.player.handleHistory(ctx, offset, scale);\n        this.enemy.draw(ctx, offset, scale);\n        this.player.draw(ctx, offset, scale);\n\t}\n\n\twin(){\n\t\tconst id = this.roomID;\n\t\tthis.socket.emit(\"playerWin\", id);\n        this.player.listen = false;\n\t}\n\n\tcommunicateMovement(){\n\t\tconst self = this;\n\n\t\tthis.socket.on('enemyUpdate', function(coord){\n\t\t\tself.enemy.coord = coord;\n\t\t});\n\n\t\tthis.socket.on('enemyFinish', function(){\n\t\t\tself.enemyFinish = false;\n\t\t});\n\t}\n}","\"use strict\";\n\nclass ViewPort {\n\n    constructor(maxDist){\n        this.coord = [0, 0];\n        this.maxDist = maxDist;\n        this.zChange = .9\n        this.zMax;\n    }\n\n    offset(pCoord, scale, cMax){\n        const center = this.getCenter(scale),\n              maxDist = cMax ? cMax : this.maxDist,\n              xDist = pCoord[0] - center[0],\n              yDist = pCoord[1] - center[1],\n              distance = Math.sqrt(Math.pow(xDist,2) + Math.pow(yDist,2));\n\n        if (distance > maxDist){\n            const angle = Math.asin(yDist/distance);\n            let xOffset = Math.cos(angle) * maxDist,\n                yOffset = Math.sin(angle) * maxDist;\n\n            if (pCoord[0] < center[0]){ xOffset *= -1; }\n\n            const mX = center[0] + xOffset,\n                  mY = center[1] + yOffset;\n\n            this.coord[0] += pCoord[0] - mX\n            this.coord[1] += pCoord[1] - mY;\n        }\n\n        if (!cMax && this.zMax){ this.zMax = null}\n        return this.coord;\n    }\n\n    zoom(zCoord, scale, percent){\n         const vCoord = this.getCenter(scale),\n               xDist = zCoord[0] - vCoord[0],\n               yDist = zCoord[1] - vCoord[1],\n               dist = Math.sqrt(Math.pow(xDist,2) + Math.pow(yDist,2));\n\n        if (!this.zMax){ this.zMax = dist - this.maxDist};\n        \n        const p = 1 - percent > 0 ? 1 - percent : 0,\n              d = this.zMax * p;\n\n        const cMax = d > this.maxDist ? d : this.maxDist;\n        return this.offset(zCoord, scale, cMax);\n    }\n\n    getCenter(scale){\n        return [\n            this.coord[0] + (window.innerWidth/2)/scale,\n            this.coord[1] + (window.innerHeight/2)/scale\n        ];\n    }\n}"]}