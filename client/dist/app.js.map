{"version":3,"sources":["app.js","background.js","clock.js","config.js","game.js","homeMenu.js","map.js","maze.js","over.js","player.js","scoreBoard.js","timeTrial.js","twoPlayer.js","viewPort.js"],"names":["App","config","canvas","document","getElementById","canvasID","context","getContext","timeTrial","twoPlayer","menu","setMenu","self","HomeMenu","time","two","roomID","inFrame","TimeTrial","start","TwoPlayer","animate","window","requestAnimFrame","run","Background","maze","bColor","size","Map","scale","buildBMaze","color","buildMaze","sRate","zoom","offset","centerOffset","setScreen","draw","dimen","innerWidth","innerHeight","clearRect","height","width","Clock","clockID","addID","startTime","interval","clock","add","left","addTop","stamp","fSize","isAdd","style","display","amount","innerHTML","toString","opacity","dist","mid","opVal","Math","abs","top","fontSize","Date","io","connect","onload","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","callback","setTimeout","Game","map","player","Player","viewPort","ViewPort","colorHistory","difficulty","colorSet","socket","initASettings","on","emit","colors","pickTColors","reSet","listen","introLoop","save","vCenter","visualForm","restore","visualComplete","setPCoordAtStart","segueLoop","oldScale","percent","coord","drawScreen","listenForMovement","gameLoop","pCollision","checkCollision","status","finish","win","ctx","handleHistory","finishLoop","randomIDX","floor","random","length","i","push","startCallbacks","title","titleID","menuID","timeID","twoID","connectID","back","backID","timeStart","twoStart","background","animInfo","init","s","menuOffset","offsetHeight","menuHeight","onclick","closeUI","disabled","connecting","uiDone","revealUI","conElipse","scaleMaze","cHTML","conFrame","tHeight","titleHeight","mHeight","rDegree","growTitle","dropMenu","newHeight","newDegree","newTop","transform","rate","tileSize","tSize","tiles","sTiles","ends","vForm","wIdx","stop","idx","y","x","fillStyle","tX","tY","fillRect","drawWin","grow","col","row","end","c","r","dimensions","pX","pY","lLeft","lRight","rLeft","rRight","bTop","bBottom","tTop","tBottom","skipEnds","fullSize","addEnds","assembleTMap","mTile","adjust","visited","carve","cCoord","noEnds","pos","rLen","inColStart","inRowStart","dir","sCoord","eCoord","setStartTiles","radius","beginPath","arc","PI","fill","Maze","directions","pickEnds","shuffle","newX","newY","inXBounds","inYBounds","sides","mSize","side","endTile","a","index","temp","OverMenu","restart","rCallback","overlay","titles","winID","loseID","overMenu","homeButton","home","oVal","restartButton","location","href","lose","state","o","initCoord","speed","maxDistance","pointer","history","updateCoord","keepHistory","addEventListener","e","pageX","pageY","bounds","novel","h","sqrt","pow","maxDist","pCoord","xDist","yDist","angle","asin","xVelocity","cos","yVelocity","sin","ScoreBoard","leftID","rightID","scoreBoardID","score","right","gameOver","gameReset","addTime","showTime","animAdd","tickTime","outOfTime","showScreen","enemy","scoreBoard","scoreLeft","scoreRight","communicateMovement","eDisconnect","initID","split","id","data","w","oStat","over","sendData","scorePoint","zChange","zMax","cMax","center","getCenter","distance","xOffset","yOffset","mX","mY","zCoord","vCoord","p","d"],"mappings":"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","file":"app.js","sourcesContent":["\"use strict\";\n\nclass App {\n\n\tconstructor(config){\n\t\tthis.config = config;\n\t\tthis.canvas = document.getElementById(config.canvasID);\n\t\tthis.context = this.canvas.getContext('2d');\n\t\tthis.timeTrial = false;\n\t\tthis.twoPlayer = false;\n\t    this.menu;\n\t    this.setMenu();\n\t}\n\n\tsetMenu(){\n\t\tconst self = this;\n\n\t\tthis.menu = new HomeMenu(this.config, {\n\t\t\ttime: function(){\n\t\t\t\tself.timeTrial = true \n\t\t\t},\n\t\t\ttwo: function(roomID){ \n\t\t\t\tself.twoPlayer = roomID;\n\t\t\t}\n\t\t});\n\t}\n\n\trun(inFrame){\n\t\tif (this.timeTrial){\n\t\t\tnew TimeTrial(this.config).start();\n\t\t}else if (this.twoPlayer){\n\t\t\tconst roomID = this.twoPlayer;\n\t\t\tnew TwoPlayer(this.config, roomID).start();\n\t\t}else{\n\t\t\tconst self = this;\n\t\t\tif (inFrame){ this.menu.animate() };\n\n\t\t\twindow.requestAnimFrame(function(){\n\t\t\t\tself.run(true);\n\t\t\t});\n\t\t}\n\t}\n};\n","\"use strict\";\n\nclass Background { \n\n\tconstructor(canvasID, maze, bColor, size){\n\t\tthis.canvas = document.getElementById(config.canvasID);\n\t\tthis.context = this.canvas.getContext('2d');\n\t\tthis.maze = new Map(10);\n\n\t\tthis.animate = {\n\t\t\t'sRate': 50,\n\t\t\t'zoom': .998\n\t\t};\n\n\t\tthis.scale;\n\t\tthis.buildBMaze(maze, bColor);\n\t}\n\n\n\tbuildBMaze(maze, bColor){\n\t\tconst color = bColor ? bColor : '#4c6b8a',\n\t\t\t  size = maze.size;\n\n\t    this.maze.buildMaze(size, [color, color], maze, true);\n\t}\n\n\tscaleMaze(){\n\t\tconst sRate = this.animate.sRate,\n\t          zoom = this.animate.zoom,\n\t          offset = this.centerOffset();\n\n\t    this.setScreen();\n\t\tthis.maze.draw(this.context, offset, this.scale);\n\n\t\tif (sRate > 950){\n\t\t\tthis.animate.zoom = .998;\n\t\t}else if (zoom < 1 && sRate < 50){\n\t\t\tthis.animate.zoom = 1.002\n\t\t}\n\n\t\tthis.animate.sRate *= this.animate.zoom;\n\t}\n\n\tcenterOffset(){\n\t\treturn [\n\t\t\tthis.maze.dimen()[0]/2 - (window.innerWidth/2)/this.scale,\n\t\t\tthis.maze.dimen()[1]/2 - (window.innerHeight/2)/this.scale\n\n\t\t];\n\t}\n\n\n\tsetScreen(){\n\t\tconst sRate = this.animate.sRate;\n\t    this.context.clearRect(0, 0, self.canvas.height, self.canvas.width);\n\t    this.canvas.height = window.innerHeight;\n\t    this.canvas.width = window.innerWidth;\n\t    this.scale = window.innerHeight/sRate;\n\t    this.context.scale(this.scale, this.scale)\n\t}\n}","\"use strict\";\n\nclass Clock{\n\tconstructor(clockID, addID, startTime, interval){\n\t\tthis.clock = document.getElementById(clockID);\n\t\tthis.add = document.getElementById(addID);\n\t\tthis.time = startTime ? startTime : 15;\n\t\tthis.left = this.time;\n\t\tthis.interval = interval ? interval * 1000: 1000;\n\t\tthis.addTop = 18;\n\t\tthis.stamp;\n\t\tthis.fSize = 4;\n\t\tthis.isAdd = false;\n\t}\n\n\n\toutOfTime(){\n\t\tif (this.left < 0){\n\t\t\tthis.clock.style.display = 'none';\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false\n\t}\n\n\taddTime(amount){\n\t\tconst self = this;\n\n\t\tthis.left += amount\n\t\tthis.add.innerHTML = \"+\" + amount.toString();\n\t\tthis.addTop = 18;\n\t\tthis.isAdd = true;\n\t\tthis.add.style.opacity = '0'\n\t\tthis.add.style.display = 'initial';\n\t}\n\n\tanimAdd(){\n\t\tconst self = this,\n\t\t\t  dist = (18 - 8)/2, mid = (18 + 8)/2,\n\t\t      opVal = 1 - Math.abs(mid - this.addTop)/dist;\n\n\t\tthis.add.style.top = this.addTop.toString() + '%'\n\t\tthis.add.style.opacity = opVal;\n\t\tthis.addTop -= .15;\n\n\t\tif (this.addTop < 8){\n\t\t\tthis.isAdd = false;\n\t\t\tthis.add.style.display = 'none';\n\t\t}\n\t}\n\n\treSet(time){\n\t\tif (time){ this.time = time }\n\t\tthis.left = this.time;\n\t}\n\n\tshowTime(){\n\t\tthis.clock.style.display = 'initial';\n        this.clock.innerHTML = this.left.toString();\n        this.clock.style.color = 'white'\n        this.clock.style.fontSize = '3em';\n\t}\n\n\ttickTime(){\n        if (!this.stamp){\n            this.stamp = new Date();\n        }else if (new Date() - this.stamp >= this.interval){\n            this.stamp = new Date();\n            this.left -= this.interval/1000;\n            this.clock.innerHTML = this.left.toString();\n            if (this.left < 11) { this.fSize = 4 };\n        }\n\n        if (this.left < 11){\n        \tthis.clock.style.fontSize\n        \tthis.clock.style.fontSize = this.fSize.toString() + 'em';\n        \tthis.fSize -= .03;\n        }\n\t}\n}\n\n\t// addTime(){\n\t// \tthis.addTop *= .98;\n\t// \tthis.add.style.top = this.addTop.string();\n\t// }","'use strict';\n\nconst config = {\n  'canvasID': 'canvas',\n  'titleID': 'title',\n  'menuID': 'menu',\n  'timeID': 'time',\n  'twoID': 'two',\n  'clockID': 'clock',\n  'winID': 'win',\n  'loseID': 'lose',\n  'overMenu': 'overMenu',\n  'overlay': 'overlay',\n  'home': 'home',\n  'restart': 'restart',\n  'addID': 'add',\n  'connectID': 'connecting',\n  'backID': 'back',\n  'scoreLeft': 'left',\n  'scoreRight': 'right',\n  'scoreBoard': 'score',\n  'socket': io.connect()\n};\n\nwindow.onload = function(){\n  new App(config).run();\n}\n\nwindow.requestAnimFrame = (function(){\n  return  window.requestAnimationFrame       ||\n          window.webkitRequestAnimationFrame ||\n          window.mozRequestAnimationFrame    ||\n          function( callback ){\n            window.setTimeout(callback, 1000 / 60);\n          };\n})();","\"use strict\";\n\nclass Game {\n\n    constructor(config){\n        this.canvas = document.getElementById(config.canvasID);\n        this.context = this.canvas.getContext('2d');\n        this.map = new Map(130);\n        this.player = new Player([0, 0], {\n            'player': 'white',\n            'history': '#4c6b8a'\n        });\n        this.viewPort = new ViewPort(50);\n        this.sRate = 800;\n        this.stamp = true;\n        this.colorHistory = [];\n        this.difficulty = 5;\n        this.colorSet = [];\n        this.scale;\n        this.socket = config.socket;\n        this.initASettings(config)\n    }\n\n    initASettings(config){\n        const self = this;\n        this.colorSet = [\n            ['#69111e', '#7D1424'],\n            ['#27ae60', '#2ecc71'],\n            ['#e67e22', '#d35400'],\n            ['#95a5a6', '#7f8c8d'],\n            ['#9b59b6', '#8e44ad']\n        ]\n\n        this.socket.on('incomingMaze', function(maze){\n            self.run(maze);\n        });\n    }\n\n    start(){\n        this.socket.emit('requestMaze', this.difficulty);\n    }\n\n    run(maze){\n        const self = this,\n              colors = this.pickTColors();\n\n        this.map.buildMaze(this.difficulty, colors, maze);\n        this.player.reSet();\n        this.sRate = 4000;\n        window.requestAnimFrame(function(){\n            self.player.listen = false;\n            self.introLoop()\n        });\n\n    }\n\n    introLoop(){\n        const self = this;\n\n        this.setScreen();\n        this.context.save();\n        this.context.scale(this.scale, this.scale);\n\n        const vCenter = [\n            this.map.dimen()[0]/2,\n            this.map.dimen()[1]/2\n        ], offset = this.viewPort.offset(vCenter, this.scale);\n\n        this.map.visualForm(this.context, offset, this.stamp, this.scale);\n        this.stamp = !this.stamp;\n        this.context.restore();\n\n        if (this.map.visualComplete()){\n            this.player.listen = false;\n            this.setPCoordAtStart();\n            window.requestAnimFrame(function(){\n                self.segueLoop();\n            });\n        }else{\n             window.requestAnimFrame(function(){\n                self.introLoop();\n             });\n        }\n    }\n\n    segueLoop(){\n        const self = this,\n              oldScale = this.scale;\n\n        this.sRate *= .99;\n        this.setScreen();\n        const percent = (4000 - this.sRate)/(4000 - 800)\n        const offset = this.viewPort.zoom(\n            this.player.coord,\n            this.scale,\n            percent\n        );\n\n\n        this.context.scale(this.scale, this.scale);\n        this.drawScreen(offset);\n\n        window.requestAnimFrame(function(){\n            if (self.sRate > 800){\n                self.segueLoop();\n            }else{\n                self.player.listen = true;\n                self.player.listenForMovement();\n                self.gameLoop();\n\n            }\n        });\n    }\n\n    gameLoop(){\n        this.setScreen();\n        const self = this,\n              offset = this.viewPort.offset(\n                this.player.coord, \n                this.scale\n              ),\n              pCollision = this.map.checkCollision(\n                this.player.coord,\n                this.player.dimen\n              );\n\n        if (pCollision.status && pCollision.finish){\n            this.win();\n            return;\n        }else if (pCollision.status){\n            this.setPCoordAtStart();\n        }\n\n        this.context.scale(this.scale, this.scale);\n        this.drawScreen(offset)\n\n        window.requestAnimFrame(function(){\n            self.gameLoop()\n        });\n    }\n\n\n    drawScreen(offset){\n        const ctx = this.context,\n              scale = this.scale;\n\n        this.map.draw(ctx, offset, scale);\n        this.player.handleHistory(ctx, offset, scale);\n        this.player.draw(ctx, offset, scale);\n    }\n\n    win(){\n        this.player.reSet(true);\n        this.finishLoop();\n    }\n\n    finishLoop(){\n        const self = this;\n        this.sRate *= 1.01;\n\n        this.setScreen();\n        const vCenter = [\n            this.map.dimen()[0]/2,\n            this.map.dimen()[1]/2\n        ];\n\n        const percent = (this.sRate - 800)/(4000 - 800),\n              offset = this.viewPort.zoom(\n                vCenter,\n                this.scale,\n                percent\n              );\n\n        this.context.scale(this.scale, this.scale);\n        this.drawScreen(offset);\n\n        window.requestAnimFrame(function(){\n            if (self.sRate < 4000){\n                self.finishLoop();\n            }else{\n                self.difficulty += 2;\n                self.start();\n            }\n        });\n    }\n\n    gameReset(){\n        this.difficulty = 5;\n        this.start();\n    }\n\n    setScreen(){\n        this.context.clearRect(0, 0, self.canvas.height, self.canvas.width);\n        this.canvas.height = window.innerHeight;\n        this.canvas.width = window.innerWidth;\n        this.scale = window.innerHeight/this.sRate;\n\n    }\n\n    setPCoordAtStart(){\n        this.player.coord = [this.map.start[0], this.map.start[1]];\n    }\n\n    pickTColors(){\n        const randomIDX = Math.floor(Math.random() * this.colorSet.length);\n\n        if (this.colorHistory.length == this.colorSet.length){    \n            this.colorHistory = [\n                this.colorHistory[this.colorHistory.length - 1]\n            ];\n        }\n\n        for (var i = 0; i < this.colorHistory.length; i++){\n            if (this.colorHistory[i] == randomIDX){\n                return this.pickTColors();\n            }\n        }\n\n        this.colorHistory.push(randomIDX);\n        return this.colorSet[randomIDX];\n    }\n}","\"use strict\";\n\nclass HomeMenu {\n\n\tconstructor(config, startCallbacks){\n\t\tthis.title = document.getElementById(config.titleID);\n\t\tthis.menu =  document.getElementById(config.menuID);\n\t\tthis.timeTrial =  document.getElementById(config.timeID);\n\t\tthis.twoPlayer = document.getElementById(config.twoID);\n\t\tthis.connect = document.getElementById(config.connectID);\n\t\tthis.back = document.getElementById(config.backID);\n\t\tthis.timeStart = startCallbacks.time;\n\t\tthis.twoStart = startCallbacks.two;\n\t\tthis.socket = config.socket;\n\t\tthis.background;\n\t\tthis.animInfo = {};\n\t\tthis.init(config.canvasID);\n\t}\n\t\n\tinit(canvasID){\n\t\tconst self = this;\n\n\t\tthis.animInfo = {\n\t\t\t'titleHeight': 0,\n\t\t\t'menuHeight': 0,\n\t\t\t'rate': 3,\n\t\t\t'uiDone': false,\n\t\t\t'connecting': false,\n\t\t\t'conFrame': 0,\n\t\t}\n\n\t\tthis.socket.on('backgroundMaze', function(maze){\n\t\t\tself.background = new Background(canvasID, maze);\n\t\t\tself.setMenu();\n\t\t});\n\t}\n\n\tsetMenu(){\n\t\tthis.menu.style.display = 'initial';\n\t\tthis.title.style.display = 'initial';\n\t\tthis.connect.style.display = 'none'\n\t\tthis.title.style.height = 0;\n\n\t\tconst s = this,\n\t\t\t  menuOffset = this.menu.offsetHeight,\n\t\t\t  menuHeight = (menuOffset/window.innerHeight) * 100;\n\n\t\tthis.timeTrial.onclick = function(){\n\t\t\ts.closeUI();\n\t\t\ts.timeStart();\n\t\t}\n\n\t\tthis.back.onclick = function(){\n\t\t\ts.connect.style.display = 'none'\n\t\t\ts.twoPlayer.disabled = false;\n\t\t\ts.timeTrial.disabled = false;\n\t\t\ts.twoPlayer.style.display = 'initial';\n\t\t\ts.timeTrial.style.display = 'initial';\n\t\t\ts.animInfo\n\t\t}\n\n\t\tthis.twoPlayer.onclick = function(){\n\t\t\ts.socket.emit('connectTwoP');\n\t\t\ts.twoPlayer.disabled = true;\n\t\t\ts.timeTrial.disabled = true;\n\t\t\ts.twoPlayer.style.display = 'none';\n\t\t\ts.timeTrial.style.display = 'none';\n\t\t\ts.connect.style.display = 'initial'\n\t\t\ts.animInfo.connecting = true;\n\t\t}\n\n\t\tthis.socket.on('connectedTwoP', function(roomID){\n\t\t\ts.closeUI();\n\t\t\ts.twoStart(roomID);\n\t\t});\n\n\t\tthis.menu.style.top = \"-\" + menuHeight.toString() + \"%\"\n\t\tthis.animInfo.menuHeight = menuHeight * -1;\t\t\n\t}\n\n\tcloseUI(){\n\t\tthis.menu.style.display = 'none';\n\t\tthis.title.style.display = 'none';\n\t}\n\n\tanimate(){\n\t\tif (!this.background){ return };\n\t\tif (!this.animInfo.uiDone){\n\t\t\tthis.revealUI();\n\t\t}\n\n\t\tif (this.connect){\n\t\t\tthis.conElipse();\n\t\t}\n\t\tthis.background.scaleMaze();\n\t}\n\n\tconElipse(){\n\t\tconst cHTML = this.connect.innerHTML;\n\t\tif (this.animInfo.conFrame % 20 == 0){\n\t\t\tif (cHTML.length == \"connecting\".length + 3){\n\t\t\t\tthis.connect.innerHTML = \"connecting\";\n\t\t\t}else{\n\t\t\t\tthis.connect.innerHTML += \".\";\n\t\t\t}\n\t\t}\n\n\t\tthis.animInfo.conFrame++;\n\t}\n\n\trevealUI(){\n\t\tconst tHeight = this.animInfo.titleHeight,\n\t\t      mHeight = this.animInfo.menuHeight,\n\t\t\t  rDegree = (tHeight * .1) * 360,\n\t\t\t  menuOffset = this.menu.offsetHeight,\n\t\t      menuHeight = (menuOffset/window.innerHeight) * 100;\n\n\t\tif (rDegree < 361){\n\t\t\tthis.growTitle(rDegree);\n\t\t}else if (mHeight < 50 - menuHeight/2){\n\t\t\tthis.dropMenu(menuHeight);\n\t\t}else{\n\t\t\tthis.animInfo.uiDone = true;\n\t\t}\n\t}\n\n\tgrowTitle(rDegree){\n\t\tconst self = this,\n\t\t      tHeight = this.animInfo.titleHeight,\n\t\t\t  newHeight = tHeight.toString() + '%',\n\t\t\t  newDegree = 'rotate(' + rDegree.toString() + 'deg)',\n\t\t\t  top = 50 - (40 * tHeight * .1),\n\t\t\t  newTop = top.toString() + '%';\n\n\t\tthis.title.style.height = newHeight;\n\t    this.title.style.transform = newDegree;\n\t    this.title.style.top = newTop;\n\n    \tthis.animInfo.titleHeight += 0.4;\n\t}\n\n\tdropMenu(menuHeight){\n\t\tconst self = this,\n\t\t      mHeight = this.animInfo.menuHeight;\n\n\t\tthis.menu.style.top = mHeight.toString() + '%';\n\t\tthis.animInfo.menuHeight += this.animInfo.rate;\n\t\tthis.animInfo.rate *= .98;\n\t}\n}","\"use strict\";\n\nclass Map {\n\n    constructor(tileSize){\n        this.tSize = tileSize;\n        this.tiles = [];\n        this.start;\n        this.sTiles = {};\n        this.ends = [];\n        this.vForm = [0, 0];\n        this.colors = [\"black\", \"white\"];\n        this.wIdx = 0\n    }\n\n    draw(ctx, offset, scale, stop){\n        const finish = this.ends.length > 0 ? this.ends[1] : null;\n        let idx = 0;\n\n        for (let y = 0; y < this.tiles.length; y++){\n            if (y  * this.tSize - offset[1] > window.innerHeight/scale && this.colors[0] == this.colors[1]){ break };\n\n            for (let x = 0; x < this.tiles[y].length; x++){\n                if (x * this.tSize - offset[0] > window.innerWidth/scale && this.colors[0] == this.colors[1]){ break };\n\n                if (this.tiles[y][x]){\n                    ctx.fillStyle = this.colors[idx];\n                    const tX = (x * this.tSize) - offset[0],\n                          tY = (y * this.tSize) - offset[1];\n\n                    ctx.fillRect(tX, tY, this.tSize, this.tSize);\n                }else if (finish && x == finish[0] && y == finish[1]){\n                    this.drawWin(ctx, offset);\n                }\n\n                idx = idx < 1 ? 1 : 0;\n\n                if (stop && y == stop[1] && x == stop[0]){\n                    break;\n                }\n            }\n\n            if (stop && y == stop[1]){\n                break;\n            }\n\n            idx = idx < 1 ? 1 : 0;\n        }\n    }\n\n    dimen(){\n        return [\n            this.tiles[0].length * this.tSize,\n            this.tiles.length * this.tSize\n        ]\n    }\n\n    visualForm(ctx, offset, grow, scale){\n        let col = this.vForm[1],\n            row = this.vForm[0];\n\n        while (col < this.tiles.length && !this.tiles[col][row]){\n            if (row < this.tiles[col].length){\n                row++;\n            }else{\n                row = 0;\n                col++;\n            }\n        }\n\n        this.draw(ctx, offset, scale, [row, col]);\n\n        if (grow && col < this.tiles.length){\n            if (row + 1 < this.tiles[col].length){\n                this.vForm = [row + 1, col];\n            }else{\n                this.vForm = [0, col + 1];\n            }\n        }\n    }\n\n    visualComplete(){\n        let end = [];\n\n        for (let c = 0; c < this.tiles.length; c++){\n            for (let r = 0; r < this.tiles[c].length; r++){\n                if (this.tiles[c][r]){\n                    end[0] = r;\n                    if (!end[1] || end[1] < c){ end[1] = c }\n                };\n            }     \n        }\n\n        return (\n            this.vForm[1] >= end[1] &&\n            this.vForm[0] >= end[0]\n        );\n    }\n\n\n    checkCollision(coord, dimensions){\n        const width = dimensions.width,\n              height = dimensions.height,\n              pX = coord[0] - (width/2),\n              pY = coord[1] - (height/2),\n              finish = this.ends[1];\n\n        for (let y = 0; y < this.tiles.length; y++){\n            for (let x = 0; x < this.tiles[y].length; x++){\n                if (this.tiles[y][x] || (x == finish[0] && y == finish[1])){\n                    const tX = x * this.tSize,\n                          tY = y * this.tSize,\n                          lLeft = pX > tX,\n                          lRight = pX < tX + this.tSize,\n                          rLeft = pX + (width) > tX,\n                          rRight = pX + (width) < tX + this.tSize;\n\n                    if (lLeft && lRight || rLeft && rRight || !lLeft && !rRight){\n                        const bTop = pY + (height) > tY,\n                              bBottom = pY + (height) < tY + this.tSize,\n                              tTop = pY > tY,\n                              tBottom = pY  < tY + this.tSize;\n\n                        if (bTop && bBottom || tTop && tBottom || !tTop && !bBottom){      \n                            return {\n                                'status': true, \n                                'finish': x == finish[0] && y == finish[1]\n                            }\n                        }\n                    }\n                }\n            }\n        }\n\n        return {'status': false, 'finish': false};\n    }\n\n\n    buildMaze(size, colors, maze, skipEnds){\n        const fullSize = (size * 2) + 1;\n\n        if (colors){ this.colors = colors };\n        this.vForm = [0, 0];\n\n        if(!skipEnds){\n            this.addEnds(maze, fullSize);\n        }else{\n            this.sTiles = {'tiles':[], 'adjust': [0,0], 'pos': null}\n        }\n\n        this.assembleTMap(fullSize);\n\n        for (let c = 0; c < size; c++){\n            for (let r = 0; r < size; r++){\n\n                const mTile = maze.map[c][r],\n                      coord = [\n                        (r * 2) + 1 + this.sTiles.adjust[0],\n                        (c * 2) + 1 + this.sTiles.adjust[1]\n                      ];\n                      \n                if (mTile && mTile.visited){\n\n                    this.tiles[coord[1]][coord[0]] = false;\n\n                    for (let i = 0; i < mTile.carve.length; i++){\n\n                        const cCoord = [\n                            coord[0] + mTile.carve[i][0], \n                            coord[1] + mTile.carve[i][1]\n                        ];\n\n                        this.tiles[cCoord[1]][cCoord[0]] = false;\n                    }\n                }\n            }\n        }\n    }\n\n    assembleTMap(size, noEnds){\n        const sTiles = this.sTiles.tiles,\n              pos = this.sTiles.pos;\n\n        this.tiles = [];\n        \n        for (let c = 0; c < size + sTiles.length; c++){\n            this.tiles[c] = [];\n            const rLen = sTiles.length > 0 ? sTiles[0].length : 0;\n            for (let r = 0; r < size + rLen; r++){\n                if(!pos){\n                    this.tiles[c][r] = true;\n                }else{\n                    const inColStart = c >= pos[1] && c < pos[1] + sTiles.length,\n                      inRowStart = r >= pos[0] && r < pos[0] + sTiles[0].length;\n\n                    if (inColStart && inRowStart){\n                        this.tiles[c].push(sTiles[c - pos[1]][r - pos[0]]);\n                    }else if (pos[0] === 0 || pos[0] == size){\n                        this.tiles[c].push((inColStart || !inRowStart) && c < size);\n                    }else if (pos[1] === 0 || pos[1] == size){\n                        this.tiles[c].push((!inColStart || inRowStart) && r < size);\n                    }\n\n                }\n            }\n        }\n\n        for (let i = 0; i < this.ends.length; i++){\n            const c = this.ends[i][1] + this.sTiles.adjust[1],\n                  r = this.ends[i][0] + this.sTiles.adjust[0]\n\n            this.tiles[c][r] = false;\n            if (i > 0){this.ends[i] = [r, c]}\n        }\n    }\n\n    addEnds(maze, fSize){\n        this.ends = [];\n        const ends = ['start', 'end'];\n        var dir, sCoord;\n\n        for (let x = 0; x < ends.length; x++){\n            if (maze[ends[x]]){\n                const end = maze[ends[x]],\n                    eCoord = [end[0] * 2 + 1, end[1] * 2 + 1];\n                if (end[0] === 0){\n                    if (ends[x] == 'start'){\n                        dir = 'left'\n                        this[ends[x]] = [\n                            eCoord[0] * this.tSize + this.tSize, \n                            eCoord[1] * this.tSize\n                        ];\n                    }\n\n                    this.ends.push([eCoord[0] - 1, eCoord[1]]);\n                }else if (end[0] == maze.size - 1){\n                    if (ends[x] == 'start'){\n                        dir = 'right';\n                        this[ends[x]] = [\n                            eCoord[0] * this.tSize + (this.tSize * 3),\n                            eCoord[1] * this.tSize\n                        ];\n                    }\n\n                    this.ends.push([eCoord[0] + 1, eCoord[1]]);\n                }else if (end[1] === 0){\n                    if (ends[x] == 'start'){\n                        dir = 'top';\n                        this[ends[x]] = [\n                            eCoord[0] * this.tSize,\n                            eCoord[1] * this.tSize + this.tSize\n                        ];\n                    }\n\n                    this.ends.push([eCoord[0], eCoord[1] - 1]);\n                }else if (end[1] == maze.size - 1){\n                    if (ends[x] == 'start'){\n                        dir = 'bottom';\n                        this[ends[x]] = [\n                            eCoord[0] * this.tSize,\n                            eCoord[1] * this.tSize + (this.tSize * 3)\n                        ];\n                    }\n\n\n                    this.ends.push([eCoord[0], eCoord[1] + 1]);\n                }\n\n                if (ends[x] == 'start'){ sCoord = [eCoord[0], eCoord[1]]}\n            }\n        }\n\n        this.setStartTiles(dir, sCoord, fSize);\n    }\n\n    drawWin(ctx, offset){\n        const color = ['#add9e6', '#0490d6'][this.wIdx],\n              x = this.ends[1][0] * this.tSize + this.tSize/2 - offset[0],\n              y = this.ends[1][1] * this.tSize + this.tSize/2 - offset[1],\n              radius = this.tSize * .7;\n\n        ctx.beginPath();\n        ctx.arc(x, y, 50, 0, 2*Math.PI);\n        ctx.fillStyle = color;\n        ctx.fill();\n\n        this.wIdx = this.wIdx > 0 ? 0 : 1\n    }\n\n    setStartTiles(dir, coord, size){\n        this.sTiles.tiles = [];\n        this.sTiles.pos = [];\n        this.sTiles.adjust = [0, 0];\n\n        for (let c = 0; c < 5; c++){\n            const row = [];\n            for (let r = 0; r < 5; r++){\n                row.push(c < 1 || c > 3 || r < 1 || r > 3);\n            }\n            this.sTiles.tiles.push(row);\n        }\n\n        switch (dir){\n            case 'top':\n                this.sTiles.pos = [coord[0] - 2, 0]\n                this.sTiles.adjust = [0, this.sTiles.tiles.length];\n\n                for (let r = 1; r < 4; r++){\n                    this.sTiles.tiles[4][r] = false;\n                };\n\n                break;\n\n            case 'bottom':\n                this.sTiles.pos = [coord[0] - 2, size]\n\n                for (let r = 1; r < 4; r++){\n                    this.sTiles.tiles[0][r] = false;\n                };\n\n                break;\n\n            case 'right':\n                this.sTiles.pos = [size, coord[1] - 2];\n\n                for (let c = 1; c < 4; c++){\n                    this.sTiles.tiles[c][0] = false;\n                };\n\n                break;\n\n            case 'left':\n                this.sTiles.pos = [0, coord[1] - 2];\n                this.sTiles.adjust = [this.sTiles.tiles[0].length, 0];\n\n                for (let c = 1; c < 4; c++){\n                    this.sTiles.tiles[c][4] = false;\n                };\n\n                break;\n        }\n    }\n\n    pickTColors(){\n        const randomIDX = Math.floor(Math.random() * this.colorSet.length);\n\n        if (this.colorHistory.length == this.colorSet.length){    \n            this.colorHistory = [\n                this.colorHistory[this.colorHistory.length - 1]\n            ];\n        }\n\n        for (var i = 0; i < this.colorHistory.length; i++){\n            if (this.colorHistory[i] == randomIDX){\n                return this.pickTColors();\n            }\n        }\n\n        this.colorHistory.push(randomIDX);\n        return this.colorSet(this.colorHistory[randomIDX]);\n    }\n}","\"use strict\";\n\nclass Maze{\n\n    constructor(size){\n        this.map = [];\n        this.size = size > 5 ? size : 5;\n        this.start;\n        this.end;\n        this.directions = [\n            [0, 1],\n            [0, -1],\n            [1, 0],\n            [-1, 0]\n        ]\n    }\n\n    assemble(){\n        for (let c = 0; c < this.size; c++){\n            var row = [];\n\n            for (var r = 0; r < this.size; r++){\n                row.push({\n                    'carve': [], \n                    'visited': false\n                })\n            }\n\n            this.map.push(row);\n        }\n\n        this.carve(0, 0);\n        this.pickEnds();\n    }\n\n    carve(x, y){\n        this.map[y][x].visited = true;\n        shuffle(this.directions);\n\n        for (let i = 0; i < this.directions.length; i++){\n            const dir = this.directions[i],\n                newX = x + dir[0],\n                newY = y + dir[1],\n                inXBounds = newX < this.size && newX >= 0,\n                inYBounds = newY < this.size && newY >= 0;\n\n            if (inXBounds && inYBounds && !this.map[newY][newX].visited){\n                this.map[y][x].carve.push(dir);\n                this.carve(newX, newY);\n            }\n        }\n    }\n\n    pickEnds(){\n        if (!this.start || !this.end){\n\n            const sides = [\n                [0, null], \n                [this.size - 1, null], \n                [null, 0], \n                [null, this.size - 1]\n            ], mSize = this.size;\n\n            let side = sides[Math.floor(Math.random() * sides.length)];\n\n            for (let i = 0; i < side.length; i++){\n                if (side[i] !== 0 && !side[i]){\n                    side[i] = Math.floor(Math.random() * (mSize - 2)) + 2;\n                }\n            }\n\n            const endTile = this.map[side[1]][side[0]];\n\n            if (endTile && endTile.visited && !this.start){\n                this.start = side;\n            }else if (endTile && endTile.visited){\n                this.end = side;\n            }\n\n            this.pickEnds();\n        }\n    }\n};\n\nfunction shuffle(a){\n    for (var i = a.length - 1; i >= 0; i--){\n        var index = Math.floor(Math.random() * (i + 1)),\n            temp = a[index];\n\n        a[index] = a[i];\n        a[i] = temp;\n    }\n}","\"use strict\";\n\nclass OverMenu {\n\n\tconstructor(config, restart, rCallback){\n\t\tthis.overlay = document.getElementById(config.overlay);\n\t\tthis.titles = {\n            'win': document.getElementById(config.winID),\n            'lose': document.getElementById(config.loseID)\n        }\n\t\tthis.menu = document.getElementById(config.overMenu);\n\t\tthis.homeButton = document.getElementById(config.home);\n        if (restart){ this.restart = rCallback };\n\t\tthis.oVal = .01;\n\t\tthis.restartButton = document.getElementById(config.restart);\n\t\tthis.setMenu(restart);\n\t}\n\n\tsetMenu(restart){\n\t\tconst s = this;\n\n\t\tthis.homeButton.onclick = function(){\n\t\t\twindow.location.href = '/';\n\t\t}\n\n        if (restart){\n            this.restartButton.style.display = 'initial';\n            this.restartButton.onclick = function(){\n                s.overlay.style.opacity = 0;\n                s.menu.style.opacity = 0;\n                s.titles.win.style.display = 'none';\n                s.titles.lose.style.display = 'none';\n                s.oVal = .01;\n\n                s.restart();\n            }\n        }else{\n            this.restartButton.style.display = 'none';\n        }\n\n\t\tthis.overlay.style.opacity = 0;\n\t\tthis.menu.style.opacity = 0;\n\t\tthis.overlay.style.display = 'initial';\n\t\tthis.menu.style.display = 'none';\n\t\tthis.titles.win.style.display = 'none';\n        this.titles.lose.style.display = 'none';\n\t}\n\n\tshowScreen(state){\n        if (state != 'win' && state != 'lose'){\n            return;\n        }\n\n        const title = this.titles[state],\n\t\t      self = this;\n        \n\t\ttitle.style.display = 'initial';\n\t\tthis.menu.style.display = 'initial'\n\n\t\twindow.requestAnimFrame(function(){\n\t\t\tself.animate();\n\t\t});\n\t}\n\n\tanimate(){\n\t\tconst o = this.oVal;\n\t\tthis.menu.style.opacity = o * 2 < 1 ? 0 * 2 : 1;\n\t\tthis.overlay.style.opacity = o;\n\t\tthis.oVal += .03;\n\t\t\n\t\tif (o < .5){\n\t\t\tconst self = this;\n\t\t\twindow.requestAnimFrame(function(){\n\t\t\t\tself.animate();\n\t\t\t});\n\t\t}\n\t}\n\n}","\"use strict\";\n\nclass Player { \n\n    constructor(initCoord, colors){\n        this.coord = initCoord;\n        this.speed = 8;\n        this.maxDistance = 500;\n        this.pointer = [null, null];\n        this.dimen = {\n            'width': 60,\n            'height': 60\n        };\n        this.colors = colors;\n        this.history = [];\n        this.listen = false;\n    }\n\n    draw(ctx, offset, scale){\n        const x = (this.coord[0] - (this.dimen.width/2) - offset[0]), \n              y = (this.coord[1] - (this.dimen.width/2) - offset[1]);\n       \n        ctx.save();\n        ctx.fillStyle = this.colors.player;\n        ctx.fillRect(x, y, this.dimen.width, this.dimen.height);\n        ctx.restore();\n\n        this.updateCoord(scale, offset, ctx);\n    }\n\n    reSet(keepHistory){\n        if (!keepHistory){\n            this.history = [];\n        }\n\n        this.listen = !this.listen;\n        this.pointer = [null, null];\n    }\n\n    listenForMovement(){\n        if (!this.listen){\n            this.listen = true;\n            return;\n        }\n\n        const self = this;\n\n        document.addEventListener('mousemove', function(e){\n            if (self.listen){ self.pointer = [e.pageX, e.pageY] };\n        });\n\n        document.addEventListener('mouseout', function(e){\n            self.pointer = [null, null];\n        });\n    }\n\n    handleHistory(ctx, offset, scale){\n        const bounds = [\n            window.innerWidth * -0.5,\n            window.innerHeight * -0.5,\n            window.innerWidth * 1.5,\n            window.innerHeight * 1.5\n        ], c = this.coord;\n\n        let novel = true;\n\n        ctx.save();\n        ctx.fillStyle = this.colors.history;\n\n        for (let i = this.history.length - 1; i >= 0; i--){\n            const h = this.history[i],\n                      x = (h[0] - offset[0]),\n                      y = (h[1] - offset[1]),\n                      inXBounds = x * scale > bounds[0] && x * scale < bounds[2],\n                      inYBounds = y * scale > bounds[1] && y * scale < bounds[3];\n\n            if (inXBounds && inYBounds){\n                ctx.beginPath();\n                ctx.arc(x, y, 10, 0, 2 * Math.PI);\n                ctx.fill();\n            }\n\n            if (novel){ \n                const dist = Math.sqrt(\n                    Math.pow(c[0] - h[0], 2) + Math.pow(c[1] - h[1], 2)\n                );\n\n                novel = dist > 4;\n            }\n        }\n\n        ctx.restore();\n\n        if (novel){\n            this.history.push([this.coord[0], this.coord[1]]);\n        } \n    }\n\n    updateCoord(scale, offset, ctx){\n        if (!this.pointer[0] || !this.pointer[1]){\n            return;\n        };\n\n        const maxDist = this.maxDistance,\n              pointer = [\n                this.pointer[0]/scale + offset[0],\n                this.pointer[1]/scale + offset[1]\n              ], \n              pCoord = [\n                this.coord[0],\n                this.coord[1]\n              ],\n\n\n              xDist = pointer[0] - pCoord[0],\n              yDist = pointer[1] - pCoord[1],\n              dist = Math.sqrt(Math.pow(xDist, 2) + Math.pow(yDist, 2)),\n\n              speed = dist <  maxDist ? this.speed * (dist/maxDist) : this.speed,\n              angle = dist > 0 ? Math.asin(yDist/dist) : 0;\n\n        let xVelocity = speed * Math.cos(angle),\n            yVelocity = speed * Math.sin(angle);\n\n        if (pointer[0] < this.coord[0]){ xVelocity *= -1 };\n\n        this.coord[0] += xVelocity;\n        this.coord[1] += yVelocity;\n    }\n}","class ScoreBoard {\n\tconstructor(leftID, rightID, scoreBoardID){\n\t\tthis.score = {'left': 0, 'right': 0}\n\t\tthis.left = document.getElementById(leftID);\n\t\tthis.right = document.getElementById(rightID);\n\n\t\tdocument.getElementById(scoreBoardID).style.display = 'initial';\n\t}\n\n    scorePoint(dir){\n\t\tif (dir != 'left' && dir != 'right'){ return };\n\n\t\tthis.score[dir]++;\n\t\tthis[dir].innerHTML = this.score[dir].toString();\n\t}\n\n\tover(){\n\t\tif (this.score.right - this.score.left > 1){\n\t\t\treturn 'lose';\n\t\t}else if (this.score.left - this.score.right > 1){\n\t\t\treturn 'win';\n\t\t}else{\n\t\t\treturn false;\n\t\t}\n\t}\n}","\"use strict\";\n\nclass TimeTrial extends Game {\n\n\tconstructor(config){\n\t\tsuper(config);\n\t\tconst self = this;\n\t\tthis.clock = new Clock(config.clockID, config.addID);\n\t\tthis.gameOver = new OverMenu(config, true, function(){\n            self.gameReset();\n        });\n\t}\n\n\trun(maze){\n\t\tif (!maze){ \n\t\t\treturn;\n\t\t}else if (this.difficulty > 5){\n            this.clock.addTime(7 * 2);\n        }\n\n\t\tthis.clock.showTime();\n\t\tsuper.run(maze);\n\t}\n\n\tintroLoop(){\n\t\tif (this.clock.isAdd){ \n\t\t\tthis.clock.animAdd() \n\t\t}\n\n\t\tsuper.introLoop();\n\t}\n\n\tgameLoop(){\n\t\tthis.clock.tickTime();\n\n\t\tif (this.clock.outOfTime()){\n            this.player.listen = false;\n            this.gameOver.showScreen('lose');\n            return;\n        }\n\n        super.gameLoop();\n\t}\n\n\tgameReset(){\n\t\tthis.clock.reSet();\n\t\tsuper.gameReset();\n\t}\n}","\"use strict\";\n\nclass TwoPlayer extends Game {\n\n\tconstructor(config, roomID){\n\t\tsuper(config);\n\t\tthis.enemy = new Player([0, 0], {\n            'player': 'gray',\n            'history': 'gray'\n\t\t});\n\n\t\tthis.roomID = roomID;\n\t\tthis.gameOver = new OverMenu(config, false);\n\t\tthis.scoreBoard = new ScoreBoard(config.scoreLeft, config.scoreRight, config.scoreBoard);\n\t\tthis.communicateMovement();\n\t\tthis.eDisconnect = false;\n\t}\n\n\trun(maze){\n\t\tthis.enemy.reSet();\n\t\tsuper.run(maze);\n\t}\n\t\n\tstart(){\n\t\tconst initID = this.roomID.split('#')[0],\n\t\t      self = this;\n\n\t\tif (initID == this.socket.id){\n\t\t\tconst data = {\n\t\t\t\t'size': this.difficulty,\n\t\t\t\t'room': this.roomID\n\t\t\t};\n\n        \tthis.socket.emit('requestMazeForRoom', data);\n\t\t}\n\n\n\t\twindow.requestAnimFrame(function(){\n\t\t\tconst w = self.canvas.width,\n\t\t\t      h = self.canvas.height;\n\n\t\t\tself.context.clearRect(0,0, w, h);\n\t\t});\n\n    }\n\n    segueLoop(){\n    \tif (this.enemy.coord[0] != this.map.start[0] || this.enemy.coord[0] != this.map.start[1]){\n    \t\tthis.enemy.coord = [this.map.start[0], this.map.start[1]]\n    \t};\n\n    \tsuper.segueLoop();\n\n    }\n\n\tgameLoop(){\n\t\tconst oStat = this.scoreBoard.over();\n\t\tif (oStat){\n            this.gameOver.showScreen(oStat);\n            this.socket.emit(\"gameFinish\");\n            return;\n        }else if (this.eDisconnect){\n        \tthis.gameOver.showScreen('win');\n        }\n\n        const sendData = {\n        \t'room': this.roomID,\n        \t'coord': this.player.coord\n        }\n\n        this.socket.emit('updatePlayerCoord', sendData);\n        super.gameLoop();\n\t}\n\n\tdrawScreen(offset){\n\t\tconst ctx = this.context,\n              scale = this.scale;\n\n        this.map.draw(ctx, offset, scale);\n        this.enemy.handleHistory(ctx, offset, scale);\n        this.player.handleHistory(ctx, offset, scale);\n        this.enemy.draw(ctx, offset, scale);\n        this.player.draw(ctx, offset, scale);\n\t}\n\n\twin(){\n\t\tthis.socket.emit(\"playerWin\", this.roomID);\n        this.scoreBoard.scorePoint('left');\n        this.difficulty += 2;\n        if (!this.scoreBoard.over()){\n        \tthis.socket.emit('requestMazeForRoom', {\n\t\t\t\t'size': this.difficulty,\n\t\t\t\t'room': this.roomID\n\t\t\t});\n        }else{\n        \tconst self = this,\n        \t      offset = this.viewPort.offset(\n\t                this.player.coord, \n\t                this.scale\n              \t  );\n              \t  \n            this.context.scale(this.scale, this.scale);\n        \tthis.drawScreen(offset);\n\n        \twindow.requestAnimFrame(function(){\n        \t\tself.gameLoop();\n        \t})\n        }\n\t}\n\n\tcommunicateMovement(){\n\t\tconst self = this;\n\n\t\tthis.socket.on('eDisconnect', function(){\n\t\t\tself.eDisconnect = true;\n\t\t});\n\n\t\tthis.socket.on('enemyUpdate', function(coord){\n\t\t\tself.enemy.coord = coord;\n\t\t});\n\n\t\tthis.socket.on('enemyFinish', function(){\n\t\t\tself.scoreBoard.scorePoint('right');\n\t\t});\n\t}\n}","\"use strict\";\n\nclass ViewPort {\n\n    constructor(maxDist){\n        this.coord = [0, 0];\n        this.maxDist = maxDist;\n        this.zChange = .9\n        this.zMax;\n    }\n\n    offset(pCoord, scale, cMax){\n        const center = this.getCenter(scale),\n              maxDist = cMax ? cMax : this.maxDist,\n              xDist = pCoord[0] - center[0],\n              yDist = pCoord[1] - center[1],\n              distance = Math.sqrt(Math.pow(xDist,2) + Math.pow(yDist,2));\n\n        if (distance > maxDist){\n            const angle = Math.asin(yDist/distance);\n            let xOffset = Math.cos(angle) * maxDist,\n                yOffset = Math.sin(angle) * maxDist;\n\n            if (pCoord[0] < center[0]){ xOffset *= -1; }\n\n            const mX = center[0] + xOffset,\n                  mY = center[1] + yOffset;\n\n            this.coord[0] += pCoord[0] - mX\n            this.coord[1] += pCoord[1] - mY;\n        }\n\n        if (!cMax && this.zMax){ this.zMax = null}\n        return this.coord;\n    }\n\n    zoom(zCoord, scale, percent){\n         const vCoord = this.getCenter(scale),\n               xDist = zCoord[0] - vCoord[0],\n               yDist = zCoord[1] - vCoord[1],\n               dist = Math.sqrt(Math.pow(xDist,2) + Math.pow(yDist,2));\n\n        if (!this.zMax){ this.zMax = dist - this.maxDist};\n        \n        const p = 1 - percent > 0 ? 1 - percent : 0,\n              d = this.zMax * p;\n\n        const cMax = d > this.maxDist ? d : this.maxDist;\n        return this.offset(zCoord, scale, cMax);\n    }\n\n    getCenter(scale){\n        return [\n            this.coord[0] + (window.innerWidth/2)/scale,\n            this.coord[1] + (window.innerHeight/2)/scale\n        ];\n    }\n}"]}